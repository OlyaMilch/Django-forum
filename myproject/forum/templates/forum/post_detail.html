<!-- Page one specific post -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ post.title }}</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 2rem;
        }
        .post, .comment {
            border: 1px solid #ccc;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 10px;
        }
        .post img {
            max-width: 100%;
            margin-top: 1rem;
        }
        .comment-form textarea {
            width: 100%;
            height: 100px;
        }
        .button {
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>

<div class="post">
    <h1>{{ post.title }}</h1>
    <p>{{ post.text }}</p>

    {% if post.images %}
        <img src="{{ post.images.url }}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –ø–æ—Å—Ç—É">
    {% endif %}

    <p><strong>–ê–≤—Ç–æ—Ä:</strong> {{ post.author.nickname }}</p>
    <p><strong>–î–∞—Ç–∞:</strong> {{ post.created_at }}</p>

    <!-- Like -->
    <form action="{% url 'like_post' pk=post.pk %}" method="post">
        {% csrf_token %}
        <button type="submit" class="button">‚ù§Ô∏è –õ–∞–π–∫ ({{ post.likes.count }})</button>
    </form>

    <!-- Edit/Delete (Author Only) -->
    {% if user == post.author.user or user.is_superuser %}
        <a href="{% url 'edit_post' pk=post.pk %}"><button class="button">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button></a>
        <form action="{% url 'delete_post' pk=post.pk %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="button">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </form>
    {% endif %}
</div>
<div style="margin-bottom: 1rem;">
    <a href="{% url 'post_list' %}">
        <button type="button" class="button">‚¨ÖÔ∏è –ö–æ –≤—Å–µ–º –ø–æ—Å—Ç–∞–º</button>
    </a>
</div>

<hr>

<!-- Comments -->
<h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
{% for comment in post.comments.all %}
    <div class="comment">
        <p>{{ comment.text }}</p>
        <small>–ê–≤—Ç–æ—Ä: {{ comment.author.nickname }} | {{ comment.created_at }}</small><br>

        {% if user == comment.author.user or user.is_superuser %}
            <a href="{% url 'edit_comment' comment.pk %}">‚úèÔ∏è</a>
            <form action="{% url 'delete_comment' comment.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit">üóëÔ∏è</button>
            </form>
        {% endif %}
    </div>

{% empty %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.</p>
{% endfor %}

<!-- Comment form -->
<h3>–û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
<form method="post" class="comment-form">
    {% csrf_token %}
    <textarea name="comment_text" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea><br>
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>

</body>
</html>
